 Começou a chegar finalmente, depois de eu ter passado um pouco esse overview, a forma de como você pode estruturar prompts mais elaborados. E uma coisa importante, normalmente esses tipos de prompts não são executados em alta escala. Vai depender muito mesmo do que você vai querer. Mas normalmente uma escala muito grande de milhões, centenas de milhares de requisições, normalmente você não vai ter algo tão grande ou tão elaborado de uma forma a não ser quando você tem uma especificidade muito grande às vezes você acaba fazendo diversas chamadas para um modelo com prompts menores do que fazer ele ler uma quantidade enorme de tokens mas nada é regra realmente você só vai decidir isso na hora no momento que você está com o problema na mão mas de uma forma ou de outra é importante você entender como que você pode organizar a estrutura de um prompt Então, por exemplo, aqui eu estou dando um exemplo bem simples. Não estou dizendo que esse prompt vai ser o melhor prompt do mundo, não. Então, o primeiro ponto aqui é persona e escopo. Persona é o que é o papel dele, o que é especialidade, qual é a role dele. Então, você vai definir quem é o modelo, ou seja, defina quem o modelo é e o que ele não deve fazer, o que não fazer. outro ponto aí isso ajuda a gente a reduzir improvisos e garante alinhamento técnico então eu vou dar um exemplo que a gente tem aqui deixa eu até aumentar um pouco o meu o meu scale draw aqui então eu vou colocar assim você é um assistente especializado em Node.js versão X e testes com Jest não faça refaturações no código original então isso aqui eu já falei o que ele é especialista e eu já falei de cara o que ele não vai fazer. Somente de fazer isso vai fazer com que aquele nosso amigo do Code Review vai ficar um pouco mais feliz porque vai ter menos coisa para ele revisar pelo fato da IA não sair mexendo em códigos que ele não devia. Aí eu tenho uma outra sessão que é o objetivo. Então, descreva de forma direta e sem ambiguidade o que precisa ser feito. Então, se eu colocar o seguinte, escreva testes para o código abaixo isso aí é errado porque é muito aberto, é muito ambíguo essa pergunta ela é extremamente vaga se eu colocar dessa forma aqui escreva testes unitários para a função abaixo usando o gest cobrindo casos de entradas válidos e inválidos eu não estou dizendo que essa frase é a melhor frase do mundo para você pedir para um IA fazer testes unitários Mas a coisa que eu estou querendo mostrar aqui para voc a diferen do que algo muito generalista do que algo que acaba sendo um pouco mais direto ao ponto Outro ponto importante, uma vez que a IA entende o que ela tem que fazer, o que você precisa definir claramente ali para ela é a entrada, ou seja, a entrada dos dados. Então, o que eu estou querendo dizer é o seguinte, você vai listar somente o necessário para resolver a tarefa, você vai manter uma separação visual e você vai evitar colar arquivos inteiros se só a parte que você precisa é realmente importante, tá? Então, nesse caso aqui, o que eu coloquei? Eu escrevi função e coloquei aqui a função que eu quero que ela resolva os meus testes unitários Ou seja, eu estou ali separando, inclusive visualmente, os meus blocos do prompt para garantir que a IA não confunda partes do objetivo dela com a entrada que você está passando. Se a entrada que você está passando está junto com o objetivo, passa esse teste, você cola teste para cobrir isso aqui. Aí ela misturou o objetivo dela, ela misturou com a função que ela tem que trabalhar e aí as coisas começam a ficar menos sistemáticas, gerando ainda mais ambiguidade. O outro ponto, que é o ponto mais crítico, na minha opinião, sempre, porque muitas vezes a gente sabe o que pedir para IA, mas a gente não sabe definir como a gente quer, principalmente em documentação então você define ali o formato de saída por exemplo, define o formato exato para minimizar riscos de resposta fora de padrão então nesse caso aqui eu forcei um pouco a barra e coloquei responda apenas com um objeto JSON no formato, o test file e o conteúdo do arquivo de teste e daí eu coloquei ali coverage notes e a breve descrição da cobertura que esse teste está fazendo então Wesley, você está pedindo para ela retornar um JSON com o conteúdo do teste dentro do JSON nesse caso eu fiz para garantir que ela vai sair exatamente nesse formato precisa ser assim? você precisa fazer a sua IA trabalhar com o JSON? não apesar que quando você for trabalhar com agentes de IA e esses caras se comunicando JSON ou qualquer formato que tenha uma clareza de regras sempre vai mitigar um monte de problemas, inclusive riscos de segurança. Bom, uma vez que eu defini o formato de saída, eu vou definir agora os critérios de qualidade. Ou seja, eu vou especificar para a IA o que define para mim uma resposta boa dela. Ent quais s esses crit que eu estou passando aqui para ela Crit O teste deve rodar com o NPM teste sem ajustes Ele deve cobrir os casos de entrada v e inv Não usar bibliotecas externas além do Jest. Então aqui eu já falei claramente aqui para ele como são os critérios que eu quero para ele conseguir realmente seguir para ele trabalhar com o que eu preciso. e depois a gente tem algo que é muito importante que normalmente a gente deixa de fazer que é o tratamento de ambiguidades ou assumptions, são pressupostos por exemplo eu digo para a IA fazer caso ela não tenha a informação que eu estou partindo do princípio que ela tem por exemplo, se faltar a versão do Node que você não consiga achar alguma coisa desse tipo assuma que a versão é a versão do Node 18 liste todos os pressupostos feitos no campo assumptions, por que que eu estou dizendo isso? toda vez que a própria IA ela tiver dúvida e que ela teve que assumir algo para ela terminar a tarefa, eu quero que ela fale para mim, no final das contas que ela fez essa tarefa partindo do princípio que o node é 18 que o jest ele vai funcionar dessa forma, que quando ele rodou NPM teste, todos os testes iriam ser corrigidos, e não somente aquele teste que eu estava trabalhando, assim, assim, assado. Então, ela consegue informar para você o que ela assumiu na hora que ela estava atendendo os seus critérios de qualidade. E depois, algo importante também, que são instruções negativas. Ou seja, você lista o que não pode aparecer numa resposta. Por exemplo, não inclua explicações ou comentários fora do JSON. Então, você já está falando, cara, você não vai fazer isso. Porque, às vezes, ela pode fazer, às vezes, ela não pode fazer. Então, você sempre vai colocar claramente o que ela não deve fazer na saída, principalmente. Ou seja, as instruções negativas normalmente são feitas para a saída. Esse é um ponto importante. E aqui é tratamento de erro. então, toda vez que ela acredita que pode ter um erro, ou se ela está fazendo algum tratamento adicional para fazer aquilo funcionar você vai fazer o seguinte olha, não consegui fazer funcionar, deu pau deu errado, ou seja, Iá não conseguiu cumprir a tarefa, você explica para ela como que ela pode retornar se ela não foi possível de cumprir aquilo que ela estava, aquilo que a gente pediu e daí nesse caso, eu posso pedir para ela fazer um JSON status error e a explica do problema do motivo pelo qual ela n conseguiu cumprir aqueles meus crit de qualidade para rodar os meus testes E aqui tem então um exemplo completo de como que ficaria um prompt estruturado. Estou dizendo que esse prompt tem todas as explicações e todos os detalhes do mundo e que é o melhor prompt que você vai colocar e você vai resolver todos os seus testes automatizados? Não estou dizendo Mas o que eu quero que você veja É que há uma estrutura clara Por sessões E que ficam muito mais fáceis Daí a entender E de você também Até mesmo quando você for reaproveitar Esse prompt para outras coisas Então você tem o Persona e Scope Você é um assistente especializado em Node.js Versão 18, teste com o JEST Não faça refatorações no código original O objetivo é gerar tese unitárias Para a função abaixo usando o JEST a entrada está aqui a função o formato de saída responda apenas com o objeto JSON nesse formato critérios, o teste deve rodar com o NPMTS sem ajustes, cobrir os casos não usar bibliotecas, ambiguidade de pressuposto, se faltar a versão do Node assuma a versão 18 e adicione isso em assumptions, instruções negativas inclua as explicações ou comentários fora do JSON, tratamento de erro se der alguma coisa ruim, retorne para mim um JSON com erro e com a explicação por que aquilo não foi trabalhado. Então, se você perceber, galera, tem uma diferença muito grande de você realmente criar um prompt claro, estruturado e intencional para resolver problemas do que você simplesmente vai lá e fala, olha, você copia um pedaço do código, gere o teste desse aqui, baseado em todos esses outros testes que eu tenho nesses arquivos. Cara, a chance de não sair como você quer é grande, a chance de sair fora do padrão é grande as chances às vezes de ela fazer testes que são inúteis pode ser grande, então você sempre pensando numa estrutura independente de qual seja ela, você consegue ser intencional, agora aqui vai uma dica, pessoal porque dá trabalho e leva tempo fazer esses prompts, e eu sei disso porque eu faço um monte desses prompts mas novamente da mesma forma que a gente trata o teste como um ativo no projeto ao longo dos anos, a documentação como um ativo no projeto ao longo dos anos, você vai começar a tratar os seus prompts como um ativo ao longo dos anos. E a parte mais interessante é que os seus prompts vão poder ser reutilizados em diversos e mais em diversos programas e que você não vai mais precisar partir do zero. Fechou? Então é isso aí galera, ficou meio grande esse vídeo, mas eu queria passar aí para você esse tipo de estrutura somente para você ter uma ideia de como que você pode fazer.